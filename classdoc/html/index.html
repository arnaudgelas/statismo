<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Statismo: StaImSMo - Statistical Image and Shape Model Library</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Statismo&#160;<span id="projectnumber">0.7</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">StaImSMo - Statistical Image and Shape Model Library </div>  </div>
</div>
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="Introduction"></a>
Introduction</h2>
<p>Statismo provides a flexible framework for generating and manipulating Statistical Shape and Image Models.</p>
<p>The idea behind such models is to generate a compact, low dimensional probability distribution model of the variability, such that new, statistical plausible samples may be extracted, or that a given object may be approximated through a small set of parameters. The most commonly known examples of such models are the Eigenfaces model (Turk and Pentland), Active Shape and Appearence models (Cootes and Taylor, 1995/1998) and the Morphable Model (Blanz and Vetter, 1999),</p>
<p>The core library is designed to be independent of the representation of the given data set and can thus be used with many different standard libraries such as VTK and ITK. The link to these libraries is given by a special <a class="el" href="classRepresenter.html" title="Provides the interface between statismo and the dataset type the application uses.">Representer</a> class, which abstracts all library specific representations and also provides methods to convert the datasets to the vector representation used by Statismo.</p>
<p>In the current version, Statismo supports statistical only linear PCA models. The implementation and interpretation is based on Probabilistic PCA, which generalizes the standard PCA models and gives a fully probabilistic interpretation.</p>
<h2><a class="anchor" id="Definitions"></a>
Definitions</h2>
<p>The following terminology is used for the library and throughout this documentation.</p>
<h3><a class="anchor" id="Dataset"></a>
Dataset</h3>
<p>A Shape, Image or Deformation field in some user defined format (such as e.g. a vtk mesh or an itk image).</p>
<h3><a class="anchor" id="Sample"></a>
Sample</h3>
<p>A sample is a representation of a dataset as it is obtained by sampling from the model. In contrast to a dataset, it has the same topology and the same number of points as the model. Furthermore, its pose is standardized and given by the model. Thus, many different datasets may have the same representation as a sample.</p>
<p>The exact relationship between a dataset and a sample is defined by the <a class="el" href="classRepresenter.html" title="Provides the interface between statismo and the dataset type the application uses.">Representer</a>. A representer may for example choose to align the datasets to a common reference before building the model. Another, very fancy, representer may even do a non-rigid registration of the datasets.</p>
<h3><a class="anchor" id="Instance"></a>
Instance</h3>
<p>An instance is closely related to the concept of a sample. In the Probabilistic PCA Model, we assume that the data our model explains are subject to uncorrelated Gaussian noise. Consequently, when we obtain a sample from the model, this sample is also subject to this noise. An instance of the model instead does not include this noise. In other words, an instance is a sample from the model with the noise is suppressed.</p>
<h3><a class="anchor" id="Representer"></a>
Representer</h3>
<p>A <a class="el" href="classRepresenter.html" title="Provides the interface between statismo and the dataset type the application uses.">Representer</a> is a class that abstracts all dataset specific aspects from the library. It provides a unified interface for creating, reading or writing datasets, etc. (i.e. it is an adapter). Furthermore, it defines the methods to convert a dataset into the sample representation used by the model.</p>
<p>Example implementations of Representers are provided for vtkPolyData, vtkStructuredPoints as well as itk Images and itk Vector Images.</p>
<h2><a class="anchor" id="main_principles"></a>
Features and design principles</h2>
<ul>
<li>Statismo uses Probabilistic PCA to compute and represent the model. This gives the model a sound probabilistic interpretation.</li>
<li>Different model builders are provided. Besides the standard model builder for PCA model (<a class="el" href="classstatismo_1_1PCAModelBuilder.html" title="Creates StatisticalModel using Principal Component Analysis.">statismo::PCAModelBuilder</a>), Statismo allows you to build models that are conditioned on surrogate data (<a class="el" href="classstatismo_1_1ConditionalModelBuilder.html" title="Creates a StatisticalModel conditioned on some external data.">statismo::ConditionalModelBuilder</a>) or include point constraints (<a class="el" href="classstatismo_1_1PartiallyFixedModelBuilder.html" title="creates a statistical model (PCA Model), given point constraints (fixed values)">statismo::PartiallyFixedModelBuilder</a>).</li>
</ul>
<ul>
<li>The core library is independent of any application specific code and user libraries, to ensure that it remains easy to deploy and versatile.</li>
<li>All datatype and application specific aspects are encoded by special representer classes.</li>
<li>As statismo is parameterized with a representer, it feels like it natively supports the represented datatypes. As an example, when using a <a class="el" href="classRepresenter.html" title="Provides the interface between statismo and the dataset type the application uses.">Representer</a> for vtkPolyData, drawing a sample from the model by StatisticalModel::DrawSample() yields directly a vtkPolyData, rather than a statismo specific object.</li>
<li>The library provides a high level interface. The user can directly work with the probability distribution defined over the samples (e.g. sample form the distribution, computing probabilities, etc), without having to worry about the underlying vector representation of the components.</li>
<li>To make the exchange of models easier, statismo saves all the information needed to use the model in one file. To ensure portability and efficiency, it is stored in the widely used HDF5 format (<a href="http://www.hdfgroup.org/HDF5">http://www.hdfgroup.org/HDF5</a>)</li>
</ul>
<h3><a class="anchor" id="MM"></a>
Memory management</h3>
<ul>
<li>All the objects of statismo are created on the heap using the Create method. This ensures that the objects are not accidentally copied or created on the stack (which would for most application be disastrous). The create method always returns a naked pointer. We recommend the use of the standard smart pointers such as e.g. std::auto_ptr or boost::unique_pointer.</li>
<li>Whenever statistimo returns a sample, this sample is created by the representer. Depending on the representer, (which is out of the control of statismo) it may return a smart pointer or a naked pointer. Make sure that you don't forget to delete the sample if necessary.</li>
</ul>
<h2><a class="anchor" id="Architecture"></a>
Architecture</h2>
<p>The following diagrams shows the main classes and their connections. </p>
<div class="image">
<img src="class_diagram.png" alt="class_diagram.png"/>
<div class="caption">
Class diagram</div></div>
<h2><a class="anchor" id="example"></a>
Example Usage</h2>
<p>The first step for using the statismo classes is define which type of dataset should be used. </p>
<div class="fragment"><pre class="fragment">        <span class="keyword">typedef</span> vtkPolyDataRepresenter RepresenterType;
        <span class="keyword">typedef</span> <a class="code" href="classstatismo_1_1DataManager.html" title="Manages Training and Test Data for building Statistical Models and provides functionality for Crossva...">statismo::DataManager&lt;RepresenterType&gt;</a> DataManagerType;
        <span class="keyword">typedef</span> <a class="code" href="classstatismo_1_1PCAModelBuilder.html" title="Creates StatisticalModel using Principal Component Analysis.">statismo::PCAModelBuilder&lt;RepresenterType&gt;</a> ModelBuilderType;
        <span class="keyword">typedef</span> <a class="code" href="classstatismo_1_1StatisticalModel.html" title="A Point/Value pair that is used to specify a value at a given point.">statismo::StatisticalModel&lt;RepresenterType&gt;</a> StatisticalModelType;       
</pre></div><p>We create a representer and provide it with a reference dataset </p>
<div class="fragment"><pre class="fragment">        RepresenterType* representer = RepresenterType::Create(<span class="stringliteral">&quot;reference.vtk&quot;</span>);
</pre></div><p>In a second step we create a data manager, which holds the datasets we would like to use for building the model. We provide the representer object to the datamanager, to tell it that it how the data need to be converted and interpreted. Then we add our data to the datamanager using the AddDataset method.</p>
<div class="fragment"><pre class="fragment">        DataManagerType* datamanager = DataManagerType::Create(representer);
        datamanager-&gt;AddDataset(<span class="stringliteral">&quot;dataset1.vtk&quot;</span>);
        datamanager-&gt;AddDataset(<span class="stringliteral">&quot;dataset2.vtk&quot;</span>);
        datamanager-&gt;AddDataset(<span class="stringliteral">&quot;dataset3.vtk&quot;</span>);
</pre></div><p>To build the model, we use the model builder and call its method BuildNewModel. The first parameters is a list of samples, which we obtain from the datamanager. The second parameter is the variance of a Gaussian noise term. It specifies how noisy we think the data is.</p>
<div class="fragment"><pre class="fragment">        ModelBuilderType* modelBuilder = ModelBuilderType::Create();
        StatisticalModelType* model = modelBuilder-&gt;BuildNewModel(datamanager-&gt;GetSampleData(), 0.1);
</pre></div><p>The model is now built. We can explore it by drawing samples from it. </p>
<div class="fragment"><pre class="fragment">        vtkPolyData* aSample = model-&gt;DrawSample();
</pre></div><p>It may also be interesting to see to which linear combination of loadings a sample corresponds. This information can be obtained as follows: </p>
<div class="fragment"><pre class="fragment">        statismo::VectorType coeffs = model-&gt;ComputeCoefficientsForDataset(sample);
</pre></div><p>We can draw a sample that corresponds to a particular linear combination </p>
<div class="fragment"><pre class="fragment">        statismo::VectorType coeffs(model-&gt;GetNumberOfPCACoefficients(), 0); 
        coeffs[0] = 1;
        vtkPolyData* model-&gt;DrawSample(coeffs);
</pre></div><p>We save the model for future use </p>
<div class="fragment"><pre class="fragment">        model-&gt;Save(<span class="stringliteral">&quot;model.hd5&quot;</span>);
</pre></div><p>Finally we have to do the cleanup (alternatively, we could have used a smart pointer that does it for us) </p>
<div class="fragment"><pre class="fragment">        representer-&gt;Delete();
        model-&gt;Delete();
        datamanager-&gt;Delete();
</pre></div> </div></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Typedefs</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Mon Mar 19 2012 20:33:15 for Statismo by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
